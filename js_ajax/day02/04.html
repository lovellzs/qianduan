<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <title>网络请求小案例 | </title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.0.3">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    
    <link rel="next" href="./05.html" />
    
    
    <link rel="prev" href="./03.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="gitbook/style.css">


        
    <div class="book"  data-level="0.4" data-basepath="." data-revision="1493679293753">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
    	
    	
    	

        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                        <i class="fa fa-check"></i>
                        
                         day02
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="0.1" data-path="01.html">
            
                
                    <a href="./01.html">
                        <i class="fa fa-check"></i>
                        
                            <b>0.1.</b>
                        
                         知识点回顾
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="0.2" data-path="02.html">
            
                
                    <a href="./02.html">
                        <i class="fa fa-check"></i>
                        
                            <b>0.2.</b>
                        
                         ajax发送网络请求封装
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="0.3" data-path="03.html">
            
                
                    <a href="./03.html">
                        <i class="fa fa-check"></i>
                        
                            <b>0.3.</b>
                        
                         jQuery发送网络请求
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter active" data-level="0.4" data-path="04.html">
            
                
                    <a href="./04.html">
                        <i class="fa fa-check"></i>
                        
                            <b>0.4.</b>
                        
                         网络请求小案例
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="0.5" data-path="05.html">
            
                
                    <a href="./05.html">
                        <i class="fa fa-check"></i>
                        
                            <b>0.5.</b>
                        
                         微博接口调试综合案例
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">Twitter</button>
                <button type="button" data-sharing="google-plus" class="button">Google</button>
                <button type="button" data-sharing="facebook" class="button">Facebook</button>
                <button type="button" data-sharing="weibo" class="button">Weibo</button>
                <button type="button" data-sharing="instapaper" class="button">Instapaper</button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" ></a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-gitbook_33">
                    
                        <h2 id="">网络请求小案例</h2>
<p><strong>基本结构和数据处理</strong></p>
<p><strong>01 基本结构</strong></p>
<pre><code>说明：
    （1）通过HTML和CSS实现一个简易的商品展示页面
    （2）要求：为页面中的所有按钮都添加点击事件，要求点击按钮之后，使用自己封装的网络请求框架发送请求获取对应的数据后更新页面显示
    （3）前端实现：
        01 当DOM加载完成之后，使用$(&quot;button&quot;)获取页面中所有的按钮
        02 为按钮添加点击事件
        03 在按钮的点击事件中发送网络请求
            001 请求的参数：当前按钮的name属性，即this.name
            002 请求的方式：GET请求
            003 请求成功之后通过split方法对服务器返回的响应体字符串进行切割，转换为数组
            004 从数组中获取指定的元素更新页面UI
    （4）后端实现
            //01 处理数据字典
            $data = array(
                &quot;nz&quot;=&gt;array(&quot;title&quot;=&gt;&quot;潮流女装&quot;,&quot;des&quot;=&gt;&quot;夏季上新装&quot;,&quot;img&quot;=&gt;&quot;images/1.webp&quot;),
                &quot;bb&quot;=&gt;array(&quot;title&quot;=&gt;&quot;时尚包包&quot;,&quot;des&quot;=&gt;&quot;永远流行的稀世珍宝&quot;,&quot;img&quot;=&gt;&quot;images/2.webp&quot;),
                &quot;xz&quot;=&gt;array(&quot;title&quot;=&gt;&quot;品牌女鞋&quot;,&quot;des&quot;=&gt;&quot;火到现在的鞋子&quot;,&quot;img&quot;=&gt;&quot;images/3.webp&quot;)
            );

            //02 接收客户端提交的参数数据
            $name = $_GET[&quot;name&quot;];

            //03 根据客户端提交的参数获取指定的数据
            $dictData = $data[$name];

            //04 把对应的数据返回
            echo $dictData[&quot;title&quot;];
            echo &quot;|&quot;;
            echo $dictData[&quot;des&quot;];
            echo &quot;|&quot;;
            echo $dictData[&quot;img&quot;];

基本结构：
    &lt;div class=&quot;box&quot;&gt;
    &lt;h3&gt;类别名称&lt;/h3&gt;
    &lt;h4&gt;描述信息&lt;/h4&gt;
    &lt;img src=&quot;images/0.jpg&quot; alt=&quot;&quot;&gt;
    &lt;div&gt;
        &lt;button name=&quot;nz&quot;&gt;女装&lt;/button&gt;
        &lt;button name=&quot;bb&quot;&gt;包包&lt;/button&gt;
        &lt;button name=&quot;xz&quot;&gt;鞋子&lt;/button&gt;
    &lt;/div&gt;
    &lt;/div&gt;
</code></pre><p><strong>02 字符串数据处理</strong></p>
<pre><code>说明：
（1）上面案例数据的处理方式比较简单，就是服务器端先把所有的数据存放到一个关联数组中（字典），然后根据用户提交的参数获取指定的数据
（2）把多组数组直接以普通字符串的方式返回给客户端，在多个返回值之间使用特殊字符如|来进行分隔

缺点：
（1）如果用来进行分隔的特殊字符在返回的具体数据中出现，那么在进行切割的时候会产生混乱
（2）通用性不好，客户端不方便处理
</code></pre><p><strong>03 XML数据处理</strong></p>
<p>简单介绍</p>
<pre><code>（1）XML是一种标记型语言，和HTML类型，主要用于表示和传输数据
（2）服务器返回给客户端的数据大部分是JSON或者是XML格式的
（3）XML文档结构主要由三部分组成
    文档声明 + 元素（开始和结尾标签） + 属性
（4）XML的使用注意
    01 标准的XML文档只有一个根节点
    02 XML的使用方式和HTML非常相似，在请求对象中有responseXML属性
    03 相对于JSON来说，XML体积较大
</code></pre><p>XML文档示例</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
&lt;products&gt;
    &lt;product id=&quot;nz&quot;&gt;
        &lt;title&gt;潮流女装&lt;/title&gt;
        &lt;des&gt;夏季上新装&lt;/des&gt;
        &lt;img&gt;images/1.webp&lt;/img&gt;
    &lt;/product&gt;
    &lt;product id=&quot;bb&quot;&gt;
        &lt;title&gt;时尚包包&lt;/title&gt;
        &lt;des&gt;最漂亮的包包，最自信的宝宝&lt;/des&gt;
        &lt;img&gt;images/2.webp&lt;/img&gt;
    &lt;/product&gt;
    &lt;product id=&quot;xz&quot;&gt;
        &lt;title&gt;品牌女鞋&lt;/title&gt;
        &lt;des&gt;今夏最大牌&lt;/des&gt;
        &lt;img&gt;images/3.webp&lt;/img&gt;
    &lt;/product&gt;
&lt;/products&gt;
</code></pre><p>PHP文件中的处理</p>
<pre><code>（1）显示的指定返回值是XML格式的header(&quot;Content-Type: text/xml; charset=utf-8&quot;);
（2）使用file_get_contents方法读取XML文档并返回
</code></pre><p>XML文档解析核心代码示例</p>
<pre><code>    var product = xmlHttp.responseXML.querySelector(&quot;#&quot; + name);
    var title = product.querySelector(&quot;title&quot;).innerHTML;
    var des = product.querySelector(&quot;des&quot;).innerHTML;
    var img = product.querySelector(&quot;img&quot;).innerHTML;

    $(&quot;h3&quot;).text(title);
    $(&quot;h4&quot;).text(des);
    $(&quot;img&quot;).attr(&quot;src&quot;,img);
</code></pre><p><strong>04 JSON数据处理</strong></p>
<p>简单介绍</p>
<pre><code>（1）JSON是一种轻量级的数据结构
（2）服务器返回给客户端的数据大部分是JSON或者是XML格式的
（3）JSON本身是有特殊格式的字符串，JSON数据的最外层通常为[]或者是{}，对应于对象中的数组和对象
（4）JSON和js简单对比
    01 标准的JSON数据所有的key都加双引号
    02 JSON中key对应的全部都是具体的属性值，而对象中存放的可能是函数
（5）JSON的使用
    序列化:把对象转换为JSON字符串，可以使用JSON.stringify
    反序列化：把JSON字符串转换为js（其他语言）对象,可以使用JSON.parser|eval方法
（6）在PHP语言中JSON的处理
    001 把JSON字符串转换为PHP对象 json_decode
    002 把PHP对象转换为JSON字符串 json_encode
</code></pre><p>JSON数据示例</p>
<pre><code>    {
        &quot;nz&quot;:{
            &quot;title&quot;:&quot;潮流女装&quot;,
            &quot;des&quot;:&quot;夏季上新装&quot;,
            &quot;img&quot;:&quot;images/weiboweibo1.webp&quot;
        },
        &quot;bb&quot;:{
            &quot;title&quot;:&quot;美丽包包&quot;,
            &quot;des&quot;:&quot;漂亮的包包&quot;,
            &quot;img&quot;:&quot;images/2.webp&quot;
        },
        &quot;xz&quot;:{
            &quot;title&quot;:&quot;品牌女鞋&quot;,
            &quot;des&quot;:&quot;最大牌的鞋子&quot;,
            &quot;img&quot;:&quot;images/3.webp&quot;
        }
    }
</code></pre><p>PHP文件中对JSON数据的处理</p>
<pre><code>    //如果返回的内容有中文, 或者返回的内容是XML必须添加一句代码
    header(&quot;Content-Type: text/json; charset=utf-8&quot;);

    //读取JSON文件的内容
    $jsonData = file_get_contents(&quot;dataJSON.json&quot;);

    //把JSON文件的内容转换为PHP对象
    $dict = json_decode($jsonData,true);

    //根据请求提交的参数获取对应的数据
    $product = $dict[$_GET[&quot;name&quot;]];

    //把最终的PHP对象转换为JSON字符串返回
    echo json_encode($product);
</code></pre><p>JSON数据解析核心代码示例</p>
<pre><code>    //var product = JSON.parse(xmlHttp.responseText);
    var product = eval(&quot;(&quot; + xmlHttp.responseText+&quot;)&quot;)

    var title = product[&quot;title&quot;];
    var des = product[&quot;des&quot;];
    var img = product[&quot;img&quot;];

    $(&quot;h3&quot;).text(title);
    $(&quot;h4&quot;).text(des);
    $(&quot;img&quot;).attr(&quot;src&quot;,img);
</code></pre>
                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./03.html" class="navigation navigation-prev " aria-label="Previous page: jQuery发送网络请求"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./05.html" class="navigation navigation-next " aria-label="Next page: 微博接口调试综合案例"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

    
    <script src="https://cdn.mathjax.org/mathjax/2.4-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
